
Save subscriptions in db (e.g. mongo) and retreive them. Best done as a promise, see this page 
https://developers.google.com/web/fundamentals/push-notifications/sending-messages-with-web-push-libraries

  return getSubscriptionsFromDatabase()
  .then(function(subscriptions) {
    let promiseChain = Promise.resolve();

    for (let i = 0; i < subscriptions.length; i++) {
      const subscription = subscriptions[i];
      promiseChain = promiseChain.then(() => {
        return triggerPushMsg(subscription, dataToSend);
      });
    }

    return promiseChain;
  })

